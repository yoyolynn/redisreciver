name: redisreceiver

attributes:
  state:
    description: Redis CPU usage state
  db:
    description: Redis database identifier
  command:
    description: Redis command identifier

metrics:
  redis.uptime:
    enabled: true
    description: Number of seconds since Redis server start
    unit: s
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  redis.cpu.time:
    enabled: true
    description: System CPU consumed by the Redis server in seconds since server start
    unit: s
    sum:
      value_type: double
      monotonic: true
      aggregation: cumulative
    attributes: [state]

  redis.clients.connected:
    enabled: true
    description: Number of client connections (excluding connections from replicas)
    unit:
    sum:
      value_type: int
      monotonic: false
      aggregation: cumulative

  redis.clients.max_input_buffer:
    enabled: true
    description: Biggest input buffer among current client connections
    unit: ""
    gauge:
      value_type: int

  redis.clients.max_output_buffer:
    enabled: true
    description: Longest output list among current client connections
    unit: ""
    gauge:
      value_type: int

  redis.clients.blocked:
    enabled: true
    description: Number of clients pending on a blocking call
    unit: ""
    sum:
      value_type: int
      monotonic: false
      aggregation: cumulative

  redis.keys.expired:
    enabled: true
    description: Total number of key expiration events
    unit: ""
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative


  redis.keys.evicted:
    enabled: true
    description: Number of evicted keys due to maxmemory limit
    unit: ""
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  redis.connections.received:
    enabled: true
    description: Total number of connections accepted by the server
    unit:
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  redis.connections.rejected:
    enabled: true
    description: Number of connections rejected because of maxclients limit
    unit:
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  redis.memory.used:
    enabled: true
    description: Total number of bytes allocated by Redis using its allocator
    unit: By
    gauge:
     value_type: int

  redis.memory.peak:
    enabled: true
    description: Peak memory consumed by Redis (in bytes)
    unit: By
    gauge:
      value_type: int

  redis.memory.rss:
    enabled: true
    description: Number of bytes that Redis allocated as seen by the operating system
    unit: By
    gauge:
      value_type: int

  redis.memory.lua:
    enabled: true
    description: Number of bytes used by the Lua engine
    unit: By
    gauge:
      value_type: int

  redis.memory.fragmentation_ratio:
    enabled: true
    description: Ratio between used_memory_rss and used_memory
    unit: ""
    gauge:
      value_type: double

  redis.rdb.changes_since_last_save:
    enabled: true
    description: Number of changes since the last dump
    unit: ""
    sum:
      value_type: int
      monotonic: false
      aggregation: cumulative

  redis.commands:
    enabled: true
    description: Number of commands processed per second
    unit: "{ops}/s"
    gauge:
      value_type: int

  redis.commands.processed:
    enabled: true
    description: Total number of commands processed by the server
    unit: ""
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  redis.net.input:
    enabled: true
    description: The total number of bytes read from the network
    unit: By
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  redis.net.output:
    enabled: true
    description: The total number of bytes written to the network
    unit: By
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  redis.keyspace.hits:
    enabled: true
    description: Number of successful lookup of keys in the main dictionary
    unit: ""
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  redis.keyspace.misses:
    enabled: true
    description: Number of failed lookup of keys in the main dictionary
    unit: ""
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative

  redis.latest_fork:
    enabled: true
    description: Duration of the latest fork operation in microseconds
    unit: us
    gauge:
      value_type: int

  redis.slaves.connected:
    enabled: true
    description: Number of connected replicas
    unit: ""
    sum:
      value_type: int
      monotonic: false
      aggregation: cumulative

  redis.replication.backlog_first_byte_offset:
    enabled: true
    description: The master offset of the replication backlog buffer
    unit: ""
    gauge:
      value_type: int

  redis.replication.offset:
    enabled: true
    description: The server's current replication offset
    unit: ""
    gauge:
      value_type: int

  redis.db.keys:
    enabled: true
    description: "Number of keyspace keys"
    unit: ""
    gauge:
      value_type: int
    attributes: [db]

  redis.db.expires:
    enabled: true
    description: "Number of keyspace keys with an expiration"
    unit: ""
    gauge:
      value_type: int
    attributes: [db]

  redis.db.avg_ttl:
    enabled: true
    description: "Average keyspace keys TTL"
    unit: ms
    gauge:
      value_type: int
    attributes: [db]

  redis.command.calls:
    enabled: true
    description: "Number of calls reached command execution"
    unit: ""
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative
    attributes: [command]

  redis.command.usec:
    enabled: true
    description: "Total CPU time consumed by command"
    unit: s
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative
    attributes: [command]

  redis.command.usec_per_call:
    enabled: true
    description: "Average CPU consumed per command execution"
    unit: ms
    gauge:
      value_type: double
    attributes: [command]

  redis.command.rejected_calls:
    enabled: true
    description: "Number of rejected calls of command"
    unit: ""
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative
    attributes: [command]

  redis.command.failed_calls:
    enabled: true
    description: "Number of failed calls of command"
    unit: ""
    sum:
      value_type: int
      monotonic: true
      aggregation: cumulative
    attributes: [command]

  redis.latencystat.p50:
    enabled: true
    description: "latency stat with percentile 50"
    unit: ""
    gauge:
      value_type: double
    attributes: [command]

  redis.latencystat.p90:
    enabled: true
    description: "latency stat with percentile 90"
    unit: ""
    gauge:
      value_type: double
    attributes: [command]

  redis.latencystat.p99:
    enabled: true
    description: "latency stat with percentile 99"
    unit: ""
    gauge:
      value_type: double
    attributes: [command]

  redis.latencystat.p99.9:
    enabled: true
    description: "latency stat with percentile 99.9"
    unit: ""
    gauge:
      value_type: double
    attributes: [command]

  redis.latencystat.p99.99:
    enabled: true
    description: "latency stat with percentile 99.99"
    unit: ""
    gauge:
      value_type: double
    attributes: [ command ]

  redis.latencystat.p100:
    enabled: true
    description: "latency stat with percentile 100"
    unit: ""
    gauge:
      value_type: double
    attributes: [command]